;/*FB_PKG_DELIM*/

__d("IGDJoinButtonWithBlockCheck.react",["I64","LSIntEnum","LSRtcCallState","RTWebIncomingRingConfiguration","ReQL","ReQLSuspense","deferredLoadComponent","react","requireDeferredForDisplay","useIsThreadBlocked","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferredForDisplay")("IGDJoinCallButton.react").__setRef("IGDJoinButtonWithBlockCheck.react"));function j(a){var b=c("useReStore")();return d("ReQLSuspense").useFirstExn(function(){return d("ReQL").fromTableAscending(b.table("rtc_ongoing_calls_on_threads_v2")).getKeyRange(a).map(function(a){a=a.ongoingCallServerInfoData;return a})},[b,a],f.id+":42")}function k(a){var b=c("useReStore")();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(a).map(function(a){a=a.ongoingCallState;return a})},[b,a],f.id+":56")}function a(a){var b;a=a.thread;var e=a.threadKey;b=(b=k(e))!=null?b:d("LSIntEnum").ofNumber(c("LSRtcCallState").NO_ONGOING_CALL);e=j(e);b=!d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSRtcCallState").AUDIO_GROUP_CALL))&&!d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSRtcCallState").AUDIO_1TO1_CALL));var f=c("useIsThreadBlocked")(),g=d("RTWebIncomingRingConfiguration").isSupportedClient();return!f&&g&&e!=null?h.jsx(i,{isVideo:b,serverInfoData:e,threadKey:a.threadKey,threadType:a.threadType}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListItemContext.react",["MWPIsThreadUnread.bs","react","useMWPIsThreadMuted","useMWPPresenceStatesForThread","useMWPThreadHasActiveUser"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react"),j=i.createContext,k=i.useContext,l=i.useMemo,m=j(!1),n=j(!1),o=j(void 0);function a(a){var b=a.children,e=a.thread;a=c("useMWPIsThreadMuted")(e);var f=c("useMWPPresenceStatesForThread")(e),g=c("useMWPThreadHasActiveUser")(f),i=l(function(){return{isActive:g,lastActivityTimestampMs:e.lastActivityTimestampMs,presenceState:f,snippet:e.snippet}},[g,f,e.lastActivityTimestampMs,e.snippet]);return h.jsx(m.Provider,{value:d("MWPIsThreadUnread.bs").isThreadUnread(e),children:h.jsx(n.Provider,{value:a,children:h.jsx(o.Provider,{value:i,children:b})})})}a.displayName=a.name+" [from "+f.id+"]";function b(){return k(m)}function e(){return k(n)}function p(){return k(o)}g.IGDThreadListItemContextProvider=a;g.useIGDThreadListItemIsUnread=b;g.useIGDThreadListItemIsMuted=e;g.useIGDThreadListItemActivity=p}),98);
__d("PolarisIGCoreAlertOffNewPanoOutline24Icon",["PolarisIGCoreSVGIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreSVGIcon"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M15.209 18.294a1 1 0 0 0-.707-.293H6.184a2.002 2.002 0 0 1-1.74-2.993l.47-.822a8.34 8.34 0 0 0 1.093-4.174c0-.159.005-.316.017-.471a1 1 0 1 0-1.994-.15 8.093 8.093 0 0 0-.023.63 6.341 6.341 0 0 1-.83 3.175l-.47.822a4.001 4.001 0 0 0 3.477 5.983h1.944a4 4 0 0 0 7.827-.382 1 1 0 0 0-.282-.86Zm-3.207 2.708a2 2 0 0 1-1.732-1.001h3.463a2.017 2.017 0 0 1-1.731 1.001Zm11.205.291-2.521-2.521a4.04 4.04 0 0 0 .976-1.629 3.957 3.957 0 0 0-.356-3.123l-.484-.853A6.358 6.358 0 0 1 20 9.997a7.953 7.953 0 0 0-4.745-7.302 3.972 3.972 0 0 0-6.51.002 8.011 8.011 0 0 0-2.438 1.697L2.707.793a1 1 0 0 0-1.414 1.414l20.5 20.5a1 1 0 0 0 1.414-1.414Zm-3.46-4.728a2.042 2.042 0 0 1-.468.8L7.72 5.805a6.004 6.004 0 0 1 2.068-1.377.998.998 0 0 0 .494-.426 1.976 1.976 0 0 1 3.439 0 1 1 0 0 0 .494.425 5.989 5.989 0 0 1 3.786 5.634 8.303 8.303 0 0 0 1.082 4.094l.483.852a1.975 1.975 0 0 1 .181 1.558Z"})}))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("IGDThreadListItemEnd.react",["fbt","CometBadge.react","IGDJoinButtonWithBlockCheck.react","IGDSBox.react","IGDThreadListItemContext.react","PolarisCallGatingHelpers","PolarisIGCoreAlertOffNewPanoOutline24Icon","ReQL","ReQLSuspense","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={badge:{backgroundColor:"x1tu34mt",$$css:!0},endMargin:{marginEnd:"x1hwekxz",$$css:!0},muteIcon:{paddingEnd:"x1mpkggp",paddingStart:"x1t2a60a",$$css:!0},noShrink:{flexShrink:"x2lah0s",$$css:!0}};function k(a){var b=a.addEndMargin;a=a.isMuted;var d=h._("__JHASH__NCRbaa_g3bP__JHASH__");return a?i.jsx("div",{className:c("stylex")(j.muteIcon,b?j.endMargin:!1),children:i.jsx(c("PolarisIGCoreAlertOffNewPanoOutline24Icon"),{alt:d,color:"ig-secondary-text",size:15})}):null}k.displayName=k.name+" [from "+f.id+"]";function l(a){a=a.isUnread;if(a)return i.jsx(c("CometBadge.react"),{colorOverride:[j.badge]});else return null}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=c("useReStore")();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("rtc_ongoing_calls_on_threads_v2")).getKeyRange(a).map(function(a){a=a.ongoingCallServerInfoData;return a})},[b,a],f.id+":110")}function a(a){a=a.thread;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemIsMuted(),e=d("IGDThreadListItemContext.react").useIGDThreadListItemIsUnread(),f=m(a.threadKey);f=f!=null;return i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"end",xstyle:j.noShrink,children:f&&d("PolarisCallGatingHelpers").isWebCallingEnabled()?i.jsx(c("IGDJoinButtonWithBlockCheck.react"),{thread:a}):i.jsxs(i.Fragment,{children:[i.jsx(k,{addEndMargin:b&&e,isMuted:b}),i.jsx(l,{isUnread:e})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadListItemSubtitle.react",["fbt","CometMiddot.react","CometRelativeTimestamp.react","I64","IGDPresenceTextForThread.react","IGDSBox.react","IGDSText.react","LSMessagingThreadTypeUtil","MAWThreadCutover.bs","cr:526","cr:6703","react","useIGDDeviceType"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={content:{height:"xmix8c7",width:"xh8yej3",$$css:!0},lockIcon:{flexShrink:"x2lah0s",$$css:!0},middot:{color:"x1roi4f4",flexShrink:"x2lah0s",marginTop:"xdj266r",marginEnd:"xw3qccf",marginBottom:"xat24cr",marginStart:"xsgj6o6",$$css:!0},minWidth:{flexShrink:"x2lah0s",minWidth:"xeuugli",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",$$css:!0},timestamp:{whiteSpace:"xuxw1ft",$$css:!0}};function k(a){a=a.visible;return a?i.jsx("span",{className:"x1roi4f4 x2lah0s xdj266r xw3qccf xat24cr xsgj6o6",children:i.jsx(c("CometMiddot.react"),{})}):null}function l(a){var b=a.isUnread,e=a.lastMessageTimestamp;a=a.snippet;var f=d("useIGDDeviceType").useIGDDeviceType();f=f.isMobile;e=e!=null&&!d("I64").equal(e,d("I64").zero)?i.jsx("div",{className:"x2lah0s xeuugli",children:i.jsx(c("IGDSText.react"),{color:"secondaryText",maxLines:1,size:f?"body":"footnote",weight:"normal",children:i.jsx("div",{className:"xuxw1ft",children:i.jsx(c("CometRelativeTimestamp.react"),{date:new Date(d("I64").to_float(e)),format:"minimized"})})})}):null;return i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSText.react"),{color:b?"primaryText":"secondaryText",maxLines:1,size:f?"body":"footnote",weight:b?"bold":"normal",children:a}),i.jsx(k,{visible:a!=null&&e!=null}),e]})}function m(a){var e=a.isRestricted,f=a.isSecure,g=a.isUnread,m=a.lastMessageTimestamp,n=a.presenceState,o=a.snippet;a=a.thread;var p=d("useIGDDeviceType").useIGDDeviceType(),q=p.isMobile;p=d("MAWThreadCutover.bs").useIsCutoverSecureThread(a.threadKey);return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",xstyle:j.content,children:[f&&!p&&b("cr:526")!==null?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"x2lah0s",children:i.jsx(b("cr:526"),{isUnread:g})}),i.jsx(k,{visible:!0})]}):null,e?i.jsx(c("IGDSText.react"),{color:"secondaryText",maxLines:1,weight:"normal",children:h._("__JHASH__3z_LKwxjv6x__JHASH__")}):b("cr:6703")!=null?i.jsx(b("cr:6703"),{thread:a}):g&&o!==null?i.jsx(l,{isSecure:f,isUnread:g,lastMessageTimestamp:m,snippet:o}):i.jsx(c("IGDPresenceTextForThread.react"),{presenceState:n,renderNullState:function(){return i.jsx(l,{isSecure:f,isUnread:g,lastMessageTimestamp:m,snippet:o})},renderWrapper:function(a){return i.jsx(c("IGDSText.react"),{color:"secondaryText",maxLines:1,size:q?"body":"footnote",weight:"normal",children:a})}})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.isRestricted;b=b===void 0?!1:b;var c=a.isUnread,e=a.lastMessageTimestamp,f=a.presenceState,g=a.snippet;a=a.thread;var h=d("LSMessagingThreadTypeUtil").isSecure(a.threadType);return i.jsx("div",{className:"x6s0dn4 x78zum5",children:i.jsx(m,{isRestricted:b,isSecure:h,isUnread:c,lastMessageTimestamp:e,presenceState:f,snippet:g,thread:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSContactInternalBadge.react",["IGDSText.react","LSContactBitOffset","LSIntEnum","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i="INTERNAL";function a(a){a=a.contact;a=(a=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(82),a))!=null?a:!1;if(a)return h.jsx("span",{className:"x5keihi x1npaq5j x1c83p5e x1enjb0b x199158v x78zum5 x1q0g3np xsgj6o6 xw3qccf x1iorvi4 x150jy0e xjkvuk6 x1e558r4",children:h.jsx(c("IGDSText.react"),{color:"webAlwaysWhite",size:"miniscule",weight:"bold",children:i})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSInternalBadge.react",["I64","LSContactInternalBadge.react","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.thread,e=c("useReStore")(),g=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.table("participants")).getKeyRange(b.threadKey).filter(function(a){return!d("I64").equal(a.contactId,g)}).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.table("contacts")).getKeyRange(a.contactId),f.id+":44");return[a,b]}).take(2)},[e,b.threadKey,g],f.id+":35");var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("contacts")).getKeyRange(g)},[e,g],f.id+":54"),j=a.length;if(j>1)return null;else if(j===0){if(i==null)return null;j=i}else{i=a[0];a=i[1];if(a==null)return null;j=a}return h.jsx(c("LSContactInternalBadge.react"),{contact:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getRestrictedIGUserWarningStorageKey",["I64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return"__IGRestrictUserInterstitial."+d("I64").to_string(a)+"__"}g["default"]=a}),98);
__d("useIGDBlockedRestrictedUserInterstitial",["I64","Int64Hooks","JSResourceForInteraction","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWPActor.react","PolarisDirectConstants","ReQL","ReQLSuspense","WebStorage","asyncToGeneratorRuntime","getRestrictedIGUserWarningStorageKey","getWarningCardStorageKey","recoverableViolation","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var g=c("useCometLazyDialog")(c("JSResourceForInteraction")("IGDGroupBlockOrRestrictAlertDialog.react").__setRef("useIGDBlockedRestrictedUserInterstitial")),h=g[0],i=c("useReStore")(),j=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(i.table("threads")).getKeyRange(a))),k=g!=null?!d("I64").equal(g.parentThreadKey,d("LSIntEnum").ofNumber(-10))&&d("LSMessagingThreadTypeUtil").isGroup(g.threadType)&&d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(28),g):!1;g=g!=null?d("LSMessagingThreadTypeUtil").isGroup(g.threadType):!1;var l=d("ReQL").mergeJoin(d("ReQL").fromTableAscending(i.table("participants")).getKeyRange(a),d("ReQL").fromTableAscending(i.table("contacts"))).filter(function(a){a[0];a=a[1];return!d("I64").equal(a.id,j)}).map(function(a){a[0];a=a[1];return a});l=d("ReQLSuspense").toArray(l,f.id+":80");l=e===d("PolarisDirectConstants").DirectGroupDialog.BLOCK?l.filter(function(a){return!d("I64").equal(a.blockedByViewerStatus,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))}).length>0:l.some(function(a){return d("LSContactBitOffset").hasWithDefault(d("LSIntEnum").ofNumber(66),a,!0)});var m=c("WebStorage").getLocalStorage(),n=e===d("PolarisDirectConstants").DirectGroupDialog.BLOCK?c("getWarningCardStorageKey")(a):c("getRestrictedIGUserWarningStorageKey")(a),o=m==null?void 0:m.getItem(n);o=o!=null?o==="true":!1;o=!o&&l&&g&&k;if(!o)return b();l=function(){var a=c("WebStorage").setItemGuarded(m,n,"true");a!=null&&c("recoverableViolation")("Unable to set item at path for BlockedUserInterstitial","messenger_web_product");return b()};return h({onClick:l,type:e},function(){})});return function(a){return g.apply(this,arguments)}}(),[j,i,h,a,e])}g["default"]=a}),98);
__d("useIsThreadSelected",["I64","IGDRouteProvider.react","emptyFunction","react","useIGDDeviceType"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.createContext,j=e.useContext,k=e.useMemo,l=e.useRef,m=e.useSyncExternalStore,n=i({addEventListener:function(){return c("emptyFunction")},getSelectedThreadKey:function(){return void 0}}),o=function(){var a=new Set(),b=void 0,c=function(){for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e()}},d=function(){return b},e=function(a){b=a,c()},f=function(b){a.add(b);return function(){a["delete"](b)}};return{addEventListener:f,getSelectedThreadKey:d,setSelectedThreadKey:e}};function a(a){a=a.children;var b=l(void 0);b.current||(b.current=o());var c=k(function(){return{addEventListener:b.current.addEventListener,getSelectedThreadKey:b.current.getSelectedThreadKey}},[]);return h.jsxs(h.Fragment,{children:[h.jsx(p,{children:function(a){b.current.setSelectedThreadKey(a);return null}}),h.jsx(n.Provider,{value:c,children:a})]})}a.displayName=a.name+" [from "+f.id+"]";function p(a){a=a.children;var b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute();return a(b)}function b(a){var b=d("useIGDDeviceType").useIGDDeviceType(),c=b.isDesktop;b=j(n);var e=b.addEventListener,f=b.getSelectedThreadKey;return m(e,function(){var b=f();return c&&!!b&&d("I64").equal(a,b)})}g.SelectedThreadKeyContextProvider=a;g.useIsThreadSelected=b}),98);
__d("useMWPPreloadThread",["JSScheduler","LSFactory","LSIntEnum","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection","ReQL","emptyFunction","promiseDone","react","useCometPreloader","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a,b,e,f){var g=c("useReStore")(),i=h(function(){f&&e&&c("JSScheduler").scheduleSpeculativeCallback(function(){f.preload()}),c("promiseDone")(g.runInTransaction(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(g.table("messages_ranges_v2__generated")).getKeyRange(a)).then(function(e){if(e&&!e.isLoadingBefore)return c("LSIssueMessagesRangeQuery")(a,e.minTimestampMs,d("LSIntEnum").ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),c("LSFactory")(b))})},"readwrite","ui"))},[JSON.stringify(a),e,f,g]);b=b?c("emptyFunction"):i;return c("useCometPreloader")("button",b,b)}g["default"]=a}),98);
__d("IGDThreadListItem.react",["CometPlaceholder.react","CometTextWithEntities.react","I64","IGDAvatar.react","IGDIsCompactModeContext.react","IGDListCell.react","IGDListCellSelectedContext.react","IGDNavigation","IGDSBox.react","IGDSText.react","IGDSVerifiedBadge.react","IGDThreadListItemContext.react","IGDThreadListItemEnd.react","IGDThreadListItemSubtitle.react","IGDThreadListNewMessageLoggingDataContext","InteractionTracingMetrics","JSResourceForInteraction","LSIntEnum","LSInternalBadge.react","LSMessagingThreadTypeUtil","LSThreadTitle.react","LSVerificationBadge.bs","MAWGating","MAWGroupInvitesForThread.bs","MWVerticalRhythm","MessengerWebUXLogger","PolarisDirectConstants","ReQL","asyncToGeneratorRuntime","promiseDone","react","shallowEqualI64","useCometLazyDialog","useIGDBlockedRestrictedUserInterstitial","useIGDDeviceType","useIsThreadSelected","useMWPPreloadThread","useReStore","useSimpleImpression","useStableCallback","useStableValue","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo,j=c("JSResourceForInteraction")("IGDGroupInvitesDialog.react").__setRef("IGDThreadListItem.react"),k={cell:{width:"xxsgkw5",$$css:!0}},l=[];function m(a){a=a.thread;return h.jsxs(h.Fragment,{children:[h.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",width:244,children:[h.jsx(p,{children:h.jsx(c("LSThreadTitle.react"),{thread:a,transforms:l})}),h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(c("LSVerificationBadge.bs"),{icon:h.jsx(c("IGDSVerifiedBadge.react"),{size:"small"}),thread:a})}),h.jsx(c("IGDSBox.react"),{marginStart:1,children:h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(c("LSInternalBadge.react"),{thread:a})})})]}),h.jsx(c("MWVerticalRhythm"),{height:8}),h.jsx(q,{thread:a})]})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var e=a.hoverStateVisible,f=a.openInbox,g=a.thread,i=c("useIGDBlockedRestrictedUserInterstitial")(g.threadKey,d("PolarisDirectConstants").DirectGroupDialog.BLOCK),l=c("useIGDBlockedRestrictedUserInterstitial")(g.threadKey,d("PolarisDirectConstants").DirectGroupDialog.RESTRICT),n=d("I64").equal(g.parentThreadKey,d("LSIntEnum").ofNumber(-1)),p=d("I64").equal(g.parentThreadKey,d("LSIntEnum").ofNumber(-3)),q=c("useReStore")();c("useSimpleImpression")(function(){var a=d("LSMessagingThreadTypeUtil").isSecure(g.threadType),b=c("InteractionTracingMetrics").currentInteractionLogger();return b.addMetadata("hasSecureThread",a?1:0)});a=c("useCometLazyDialog")(j);var s=a[0];a=d("LSMessagingThreadTypeUtil").isSecure(g.threadType);a=c("useMWPPreloadThread")(g.threadKey,a,!1);var t=a[0];a=a[1];var u=d("useIGDDeviceType").useIGDDeviceType().isMobile,v=d("IGDIsCompactModeContext.react").useIsCompactMode(),w=v?void 0:h.jsx(c("IGDThreadListItemEnd.react"),{thread:g}),x=v?void 0:h.jsx(m,{thread:g}),y=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),z=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceId();return h.jsx(o,{threadKey:g.threadKey,children:h.jsx(c("IGDListCell.react"),{addOnEnd:w,addOnStart:h.jsx(r,{thread:g}),content:x,hoverStateVisible:e,noopOnPressWhenSelected:!0,onHoverIn:t,onHoverOut:a,onPress:function(){y==null?void 0:y({eventName:"thread_open",flowInstanceId:z.current});var a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(q.table("threads")).getKeyRange(g.threadKey)));if(a==null)return;var b=d("MAWGroupInvitesForThread.bs").isGroupInviteThread(a);d("MAWGating").isGroupInvitesEnabled()&&b?s({thread:a},function(){}):(yield l(function(){f({clientThreadKey:a.clientThreadKey,threadKey:g.threadKey,threadType:g.threadType},n?"pendingRequests":p?"inboxSpam":"inboxThreadList")}),yield i(function(){f({clientThreadKey:a.clientThreadKey,threadKey:g.threadKey,threadType:g.threadType},n?"pendingRequests":p?"inboxSpam":"inboxThreadList")}))});return function(){return a.apply(this,arguments)}}();c("promiseDone")(a())},role:"row",size:u?"small":"large",testid:void 0,xstyle:!v&&!u&&k.cell})})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.children;a=a.threadKey;a=d("useIsThreadSelected").useIsThreadSelected(a);return h.jsx(d("IGDListCellSelectedContext.react").IGDListCellSelectedContextProvider,{selected:a,children:b})}o.displayName=o.name+" [from "+f.id+"]";function p(a){a=a.children;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemIsUnread();return h.jsx(c("IGDSText.react"),{color:"primaryText",maxLines:1,size:"body",weight:b?"semibold":"normal",children:a})}p.displayName=p.name+" [from "+f.id+"]";function q(a){a=a.thread;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemIsUnread(),e=d("IGDThreadListItemContext.react").useIGDThreadListItemActivity(),f=e.lastActivityTimestampMs,g=e.presenceState;e=e.snippet;e=e!=null?h.jsx(c("CometTextWithEntities.react"),{maxLines:1,text:e,transforms:l}):null;return h.jsx(c("IGDThreadListItemSubtitle.react"),{isUnread:b,lastMessageTimestamp:f,presenceState:g,snippet:e,thread:a})}q.displayName=q.name+" [from "+f.id+"]";function r(a){a=a.thread;var b=d("IGDThreadListItemContext.react").useIGDThreadListItemActivity();b=b.isActive;return h.jsx(c("IGDAvatar.react"),{isActive:b,size:"large",thread:a})}r.displayName=r.name+" [from "+f.id+"]";function a(a){a=a.thread;var b=d("useIGDDeviceType").useIGDDeviceType(),e=b.isDesktop;b=d("IGDNavigation").useIGDNavigation();var f=c("useStableCallback")(b.openInbox);d("IGDNavigation").usePreloadRoute(a.threadKey);var g=d("useStableValue").useStableValue({parentThreadKey:a.parentThreadKey,threadKey:a.threadKey,threadName:a.threadName,threadPictureUrl:a.threadPictureUrl,threadPictureUrlExpirationTimestampMs:a.threadPictureUrlExpirationTimestampMs,threadPictureUrlFallback:a.threadPictureUrlFallback,threadSubtype:a.threadSubtype,threadType:a.threadType},d("shallowEqualI64").shallowEqualI64);b=i(function(){return h.jsx(n,{hoverStateVisible:e,openInbox:f,thread:g})},[e,f,g]);return h.jsx(d("IGDThreadListItemContext.react").IGDThreadListItemContextProvider,{thread:a,children:h.jsx(d("IGDThreadListNewMessageLoggingDataContext").IGDThreadListNewMessageLoggingContextProvider,{flowInstanceId:c("uuidv4")(),children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMarkSeenWhenVisible",["Int64Hooks","MWPFolderFocusedManager.bs","MetaConfig","ReQL","UserActivity","cr:355","emptyFunction","react","useMWPMarkSeen","useReStore","useSimpleImpression","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useRef;function a(a){var e,f=c("useReStore")(),g=i(!1),j=(e=b("cr:355")==null?void 0:b("cr:355")(a))!=null?e:c("emptyFunction");e=c("useVisibilityObserver")({onHidden:function(){g.current=!1},onVisible:function(){g.current=!0}});var k=c("useMWPMarkSeen")(a),l=h(function(){k(),void j()},[k,j]);d("MWPFolderFocusedManager.bs").useWatchFocusChanges(l,g);c("useSimpleImpression")(l);d("Int64Hooks").useEffectInt64(function(){if(c("MetaConfig")._("46"))return function(){};else return d("ReQL").fromTableDescending(f.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(a).take(1).subscribe(function(){c("UserActivity").isOnTab()&&g.current===!0&&l()})},[f,a,l]);return e}g["default"]=a}),98);
__d("MWPBaseThreadList.react",["Box.react","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQuery","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQuery","MWCMIsThreadBumped","MWIsXacGroupThread.bs","MWThreadListFocusableTable.react","MWThreadListSupportedThreadTypes.bs","MWXacGating.bs","MetaConfig","ReQL","ReQLPaginatedList.react","ReQLPaginatedList.shared","ReQLSuspense","asyncToGeneratorRuntime","promiseDone","react","useMarkSeenWhenVisible","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useCallback,j=e.useEffect,k=e.useMemo,l=c("MetaConfig")._("41")===!0,m={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function n(a,e,f,g){g===void 0&&(g=!1),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.table("threads_ranges_v2__generated").get(e));if(b==null||b.isLoadingBefore)return;f&&f();return c("LSThreadsRangesQuery")(b.parentThreadKey,!0,!1,b.minThreadKey,b.maxThreadKey,b.maxLastActivityTimestampMs,b.minLastActivityTimestampMs,d("I64").zero,g,c("LSFactory")(a))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui"))}function o(a,e,f,g,h){f===void 0&&(f=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE)),g===void 0&&(g=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE)),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.table("filtered_threads_ranges_v3__generated").get(e));if(b==null||b.isLoadingBefore)return;h&&h();return c("LSFilteredThreadsRangesQuery")(b.parentThreadKey,f,!0,!1,b.minThreadKey,b.maxThreadKey,b.maxLastActivityTimestampMs,b.minLastActivityTimestampMs,void 0,void 0,g,void 0,c("LSFactory")(a))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui"))}function p(a,b,e,f,g,h){e===void 0&&(e=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE));f===void 0&&(f=d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").NONE));h===void 0&&(h=!1);if(b==null)return;if(!b.threadRangeFilter){var i=d("ReQL").key(b.parentThreadKey,b.minThreadKey,b.minLastActivityTimestampMs);n(a,i,g,h)}else{i=d("ReQL").key(b.parentThreadKey,b.minThreadKey,b.minLastActivityTimestampMs,b.threadRangeFilter,b.folderName,b.secondaryThreadRangeFilter,b.threadRangeFilterValue);o(a,i,e,f,g)}}function q(a,b,e,f,g,h){h===void 0&&(h=!1),c("promiseDone")(a.runInTransaction(function(a){g==null?void 0:g();if(e==null)return c("LSThreadsRangesQuery")(b,!0,!1,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").zero,h,c("LSFactory")(a));else return c("LSFilteredThreadsRangesQuery")(b,e,!0,!1,d("I64").max_int,d("I64").max_int,d("I64").max_int,d("I64").max_int,void 0,void 0,f,void 0,c("LSFactory")(a))},"readwrite","ui"))}function a(a){var b=a.afterContent,e=a.beforeContent,g=a.customThreadFilter_DO_NOT_USE,n=a.emptyContent,o=a.filter,r=a.gridLabel,s=a.loadMoreThreads,t=s===void 0?p:s;s=a.loadMoreThreadsForEmptyRange;var u=s===void 0?q:s,v=a.onLoadMoreThreads;s=a.onScroll;var w=a.onReachingTop,x=a.onThreadsLoaded,y=a.pageSize,z=a.parentThreadKey,A=a.renderItem,B=a.renderLoadingAnimation,C=a.secondaryFilter,D=a.setIsEmptyInbox,E=a.shouldSkipE2eeThreadsRanges,F=E===void 0?!1:E;E=a.role;E=E===void 0?"grid":E;var G=a.containerStyle,H=a.imperativeRef;a=a.isSufficientContentLoadedBelow;var I=c("useReStore")(),J=d("ReQLSuspense").useFirst(function(){if(o==null)return d("ReQL").fromTableDescending(I.table("threads_ranges_v2__generated")).getKeyRange(z);else return d("ReQL").fromTableDescending(I.table("filtered_threads_ranges_v3__generated")).getKeyRange(z).filter(function(a){return d("I64").equal(a.threadRangeFilter,o)&&(!C||d("I64").equal(a.secondaryThreadRangeFilter,C))})},[I,z,o,C],f.id+":341"),K=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(I.table("pinned_threads").index("pinnedTimestamp"))},[I],f.id+":362"),L=d("ReQLSuspense").useArray(function(){return l?d("ReQL").fromTableAscending(I.table("community_folders")):d("ReQL").empty()},[I],f.id+":368"),M=k(function(){return L.filter(function(a){return a.isHidden}).map(function(a){return d("I64").to_string(a.folderId)})},[L]),N=c("MetaConfig")._("44");J!=null&&!J.isLoadingBefore&&(x&&x());var O=J!=null?d("I64").equal(J.minLastActivityTimestampMs,d("I64").zero)||d("I64").equal(J.minLastActivityTimestampMs,d("I64").one)||(N?d("I64").equal(J.minLastActivityTimestampMs,d("I64").max_int):!1)?null:J.minLastActivityTimestampMs:null,P=J!=null?d("I64").equal(J.maxLastActivityTimestampMs,d("I64").zero)||d("I64").equal(J.maxLastActivityTimestampMs,d("I64").one)?null:J.maxLastActivityTimestampMs:null,Q=d("Int64Hooks").useMemoInt64(function(){var a;return{gte:d("ReQL").key((a=O)!=null?a:d("I64").min_int),lte:d("ReQL").key((a=P)!=null?a:d("I64").max_int)}},[P,O]),R=d("Int64Hooks").useMemoInt64(function(){var a=d("ReQL").fromTableDescending(I.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(z);a=(l?d("ReQL").union(a,d("ReQL").fromTableDescending(I.table("threads").index("secondaryParentThreadKeyLastActivityTimestampMs")).getKeyRange(z)):a).filter(function(a){return c("MWCMIsThreadBumped")(a)&&M.includes(d("I64").to_string(a.parentThreadKey))?!1:d("MWThreadListSupportedThreadTypes.bs").supportedThreadTypes.findIndex(function(b){return d("I64").equal(a.threadType,b)})!==-1&&(!c("MetaConfig")._("45")||K.findIndex(function(b){return d("I64").equal(a.threadKey,b.threadKey)})===-1)&&(d("MWXacGating.bs").isGroupsEnabled()||!d("MWIsXacGroupThread.bs").check(a))&&(!g||g(a))});return d("ReQLPaginatedList.shared").fromIterables(d("ReQL").empty(),a)},[I,z,K,g,M]),S=d("ReQLSuspense").useFirst(function(){return R.descending.bounds(Q)},[Q,R],f.id+":467")==null;j(function(){D&&D(S)},[S,D]);d("Int64Hooks").useEffectInt64(function(){J==null&&u(I,z,o,C,v)},[z,J,I,o,C,v,u]);x=c("useMarkSeenWhenVisible")(z);N=i(function(){t(I,J,o,C,v,F)},[I,t,J,o,C,v,F]);var T=i(function(a){return h.jsx(h.Fragment,{children:A(a)},d("I64").to_string(a.threadKey))},[A]);return J==null?B!=null?B():null:h.jsx(c("Box.react"),{"aria-label":r,"data-testid":void 0,ref:x,role:E,xstyle:[m.container,G],children:h.jsx(d("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:h.jsx(c("ReQLPaginatedList.react"),{bounds:Q,data:R,direction:"desc",hasReachedBottom:!J.hasMoreBefore,hasReachedTop:!J.hasMoreAfter,imperativeRef:H,isSufficientContentLoadedBelow:a,onReachingBottom:N,onReachingTop:w,onScroll:s,pageSize:y,renderEmptyContent:function(){return S&&!J.isLoadingAfter&&!J.isLoadingBefore?h.jsx(c("Box.react"),{xstyle:m.emptyContentContainer,children:n}):null},renderFooter:function(){return b},renderHeader:function(){return e},renderItem:T,renderLoadingAnimation:B,xstyle:m.list})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMemoizableRender",["FBLogger","react","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a,b){var d=i(new WeakMap());return h(function(e,f){var g=a(e);e=b(e);var h=d.current.get(g);if(!h||!c("shallowEqual")(e,h.props)){f=f(e);d.current.set(g,{element:f,props:e})}h=d.current.get(g);if(!h)throw c("FBLogger")("ig_web").mustfixThrow("memoized is null/undefined. This should never happen.");return h.element},[a,b])}g["default"]=a}),98);
__d("IGDThreadList.react",["CometCompositeStructureContext","I64","IGDInboxLeftColumnPlaceholder.react","IGDListCellPlaceholder.react","IGDProLogging","IGDThreadListItem.react","IgTags_InboxFolder","LSIntEnum","LSThreadRangeFilter","MAWGating","MAWJobDefinitions","MAWTimedJob","MWPBaseThreadList.react","MWPBumpEntityKey","MWPThreadIsPage.react","MWThreadKey.react","ReQL","ReQLSuspense","WAJobOrchestratorTypes","WebUXLoggingSurfaceContextProvider","cr:2956","gkx","promiseDone","qex","react","useHasIGBroadcastChannelTab","useIsThreadSelected","useMemoizableRender","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.memo,j=e.useCallback,k=e.useRef,l="list",m={role:l},n=72,o={bottom:n*2,top:n*2},p={shimmerOverlay:{bottom:"x1ey2m1c",end:"xds687c",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},threadListHidden:{opacity:"xg01cxk",$$css:!0}};function q(a,b){return a>b.clientHeight+b.scrollTop+n*2}var r=i(function(a){var b=a.afterContent,e=a.beforeContent,f=a.emptyContent,g=a.gridLabel,i=a.isMessageRequestRoute,n=i===void 0?!1:i;i=a.parentThreadKey;var o=a.proIgFolder;a=a.visible;var r=k(null),s=j(function(){var a;return(a=r.current)==null?void 0:a.getScrollAreaElement()},[]);s=t(s);var u=j(function(a){if(o!=null){return d("I64").equal((a=a.igFolder)!=null?a:d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY),o)}else return!1},[o]),v=j(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("igd.threadlist","load_more_threads");if(n&&d("MAWGating").isArmadillo()&&c("qex")._("235")===!0){var a=d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.getSpams({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH}));c("promiseDone")(a)}if(o!=null){d("I64").equal(o,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY))?d("IGDProLogging").ODSBumpLoadThreadsPrimary():d("I64").equal(o,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").GENERAL))&&d("IGDProLogging").ODSBumpLoadThreadsGeneral();return d("IGDProLogging").QPLStart()}},[n,o]),w=j(function(){if(o!=null)return d("IGDProLogging").QPLEndSuccess()},[o]),x=c("useHasIGBroadcastChannelTab")();x=o==null?void 0:d("I64").equal(o,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").PRIMARY))?d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").IGD_PRO_PRIMARY):d("I64").equal(o,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").GENERAL))?d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").IGD_PRO_GENERAL):x&&d("I64").equal(o,d("LSIntEnum").ofNumber(c("IgTags_InboxFolder").SUBSCRIBER))?d("LSIntEnum").ofNumber(c("LSThreadRangeFilter").IGD_PRO_CHANNELS):void 0;return h.jsx(c("CometCompositeStructureContext").Provider,{value:m,children:h.jsx(d("useIsThreadSelected").SelectedThreadKeyContextProvider,{children:h.jsx(c("MWPBaseThreadList.react"),{afterContent:b,beforeContent:e,containerStyle:!a&&p.threadListHidden,customThreadFilter_DO_NOT_USE:o!=null?u:void 0,emptyContent:f,filter:x,gridLabel:g,imperativeRef:r,isSufficientContentLoadedBelow:c("gkx")("8353")?q:void 0,onLoadMoreThreads:v,onThreadsLoaded:w,pageSize:15,parentThreadKey:i,renderItem:s,renderLoadingAnimation:function(){return h.jsxs(h.Fragment,{children:[h.jsx(c("IGDListCellPlaceholder.react"),{}),h.jsx(c("IGDListCellPlaceholder.react"),{})]})},role:l,shouldSkipE2eeThreadsRanges:c("qex")._("57")===!0})})})});function s(){var a=c("useReStore")(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(d("LSIntEnum").ofNumber(1))},[a],f.id+":239");return b==null?"Loading":d("I64").equal(b.syncStatus,d("LSIntEnum").ofNumber(2))?"Complete":"Loading"}function a(a){var b=s();b=b==="Complete";return h.jsxs(h.Fragment,{children:[!b&&h.jsx("div",{className:"x1ey2m1c xds687c x10l6tqk x17qophe x13vifvy",children:h.jsx(d("IGDInboxLeftColumnPlaceholder.react").IGDInboxLeftColumnPlaceholderThreadListLayout,{})}),h.jsx(r,babelHelpers["extends"]({},a,{visible:b}))]})}a.displayName=a.name+" [from "+f.id+"]";function t(a){var b=j(function(a){return a},[]),d=j(function(b){return{onGetScrollAreaElement:a,thread:b}},[a]),e=c("useMemoizableRender")(b,d);return j(function(a){return e(a,function(a){return h.jsx(u,babelHelpers["extends"]({},a))})},[e])}function u(a){var e=a.onGetScrollAreaElement;a=a.thread;a=h.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:a.threadKey,children:h.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:a.threadKey,children:h.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"igd_thread_list",children:h.jsx(c("IGDThreadListItem.react"),{thread:a})})})});return b("cr:2956")==null?a:h.jsx(b("cr:2956"),{root:e,rootMargin:o,children:a})}u.displayName=u.name+" [from "+f.id+"]";g["default"]=a}),98);